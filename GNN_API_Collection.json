{
    "info": {
        "_postman_id": "gnn-api-collection",
        "name": "Food & Nutrition Management System (GNN) API",
        "description": "API Test Collection for GNN Project. Includes all endpoints for Auth, Users, Food Search, Barcode, Recipes, and Data Management.",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "item": [
        {
            "name": "Auth",
            "item": [
                {
                    "name": "Sign Up",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"email\": \"test@example.com\",\n    \"password\": \"password123\",\n    \"weight\": 70,\n    \"height\": 175,\n    \"calories\": 2000\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/auth/signup",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "auth",
                                "signup"
                            ]
                        },
                        "description": "Register a new user with BMI data"
                    },
                    "response": []
                },
                {
                    "name": "Sign In",
                    "event": [
                        {
                            "listen": "test",
                            "script": {
                                "exec": [
                                    "var jsonData = pm.response.json();",
                                    "if (jsonData.success && jsonData.session && jsonData.session.access_token) {",
                                    "    pm.environment.set(\"authToken\", jsonData.session.access_token);",
                                    "    pm.environment.set(\"userId\", jsonData.user.id);",
                                    "}"
                                ],
                                "type": "text/javascript"
                            }
                        }
                    ],
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"email\": \"test@example.com\",\n    \"password\": \"password123\"\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/auth/signin",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "auth",
                                "signin"
                            ]
                        },
                        "description": "Login and get access token"
                    },
                    "response": []
                },
                {
                    "name": "Get User Info (Signup/BMI)",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/api/auth/signup?user_id={{userId}}",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "auth",
                                "signup"
                            ],
                            "query": [
                                {
                                    "key": "user_id",
                                    "value": "{{userId}}"
                                }
                            ]
                        },
                        "description": "Get BMI data for a user"
                    },
                    "response": []
                },
                {
                    "name": "Check BMI Table Status",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/api/auth/check-table",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "auth",
                                "check-table"
                            ]
                        }
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "Users",
            "item": [
                {
                    "name": "Get All Users",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/api/users",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "users"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Get User Profile",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/api/users/profile?user_id={{userId}}",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "users",
                                "profile"
                            ],
                            "query": [
                                {
                                    "key": "user_id",
                                    "value": "{{userId}}"
                                }
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Get User Profile (POST)",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"user_id\": \"{{userId}}\"\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/users/profile",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "users",
                                "profile"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Get User By ID",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/api/users/{{userId}}",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "users",
                                "{{userId}}"
                            ]
                        }
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "OpenFoodFacts",
            "item": [
                {
                    "name": "Search Products",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/api/openfoodfacts/search?q=coke&page=1&page_size=10",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "openfoodfacts",
                                "search"
                            ],
                            "query": [
                                {
                                    "key": "q",
                                    "value": "coke"
                                },
                                {
                                    "key": "page",
                                    "value": "1"
                                },
                                {
                                    "key": "page_size",
                                    "value": "10"
                                }
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Get Product by Barcode",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/api/openfoodfacts/product/8850127110152",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "openfoodfacts",
                                "product",
                                "8850127110152"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Get Random Products",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/api/openfoodfacts/random?count=5",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "openfoodfacts",
                                "random"
                            ],
                            "query": [
                                {
                                    "key": "count",
                                    "value": "5"
                                }
                            ]
                        }
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "Barcode",
            "item": [
                {
                    "name": "Scan Barcode (Image)",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "formdata",
                            "formdata": [
                                {
                                    "key": "image",
                                    "type": "file",
                                    "src": []
                                }
                            ]
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/barcode/scan",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "barcode",
                                "scan"
                            ]
                        },
                        "description": "Upload an image with a barcode to scan and get product data"
                    },
                    "response": []
                },
                {
                    "name": "Read Barcode Only",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "formdata",
                            "formdata": [
                                {
                                    "key": "image",
                                    "type": "file",
                                    "src": []
                                }
                            ]
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/barcode/read",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "barcode",
                                "read"
                            ]
                        },
                        "description": "Read barcode number from image without fetching product data"
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "Recipes",
            "item": [
                {
                    "name": "Search Recipes",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/api/recipes/search?q=pancake&number=10",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "recipes",
                                "search"
                            ],
                            "query": [
                                {
                                    "key": "q",
                                    "value": "pancake"
                                },
                                {
                                    "key": "number",
                                    "value": "10"
                                }
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Get Recipe Info",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/api/recipes/654812/information",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "recipes",
                                "654812",
                                "information"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Get Recipe Nutrition",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/api/recipes/654812/nutrition",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "recipes",
                                "654812",
                                "nutrition"
                            ]
                        }
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "Cart",
            "item": [
                {
                    "name": "Save Cart History",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"user_id\": \"{{userId}}\",\n    \"items\": [\n        {\n            \"id\": \"123\",\n            \"name\": \"Test Item\",\n            \"calories\": 100,\n            \"quantity\": 2\n        }\n    ],\n    \"total_calories\": 200\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/cart/save",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "cart",
                                "save"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Get Cart History",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/api/cart/history?user_id={{userId}}",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "cart",
                                "history"
                            ],
                            "query": [
                                {
                                    "key": "user_id",
                                    "value": "{{userId}}"
                                }
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Get Latest Cart",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/api/cart/latest?user_id={{userId}}",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "cart",
                                "latest"
                            ],
                            "query": [
                                {
                                    "key": "user_id",
                                    "value": "{{userId}}"
                                }
                            ]
                        }
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "Transactions",
            "item": [
                {
                    "name": "Get Transactions",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/api/transactions?user_id={{userId}}",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "transactions"
                            ],
                            "query": [
                                {
                                    "key": "user_id",
                                    "value": "{{userId}}"
                                }
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Get Transaction Stats",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/api/transactions/stats/{{userId}}",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "transactions",
                                "stats",
                                "{{userId}}"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Create Transaction",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"user_id\": \"{{userId}}\",\n    \"transaction_type\": \"test_type\",\n    \"action\": \"test_action\",\n    \"description\": \"Test description via Postman\"\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/transactions",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "transactions"
                            ]
                        }
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "Data (General)",
            "item": [
                {
                    "name": "Save Calorie Log",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "Content-Type",
                                "value": "application/json"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"user_id\": \"{{userId}}\",\n    \"date\": \"2024-01-01\",\n    \"total_calories\": 1500,\n    \"target_calories\": 2000,\n    \"items\": []\n}"
                        },
                        "url": {
                            "raw": "{{baseUrl}}/api/data/calorie_logs",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "data",
                                "calorie_logs"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Get Table Data",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/api/data/bmi_records?limit=5",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "api",
                                "data",
                                "bmi_records"
                            ],
                            "query": [
                                {
                                    "key": "limit",
                                    "value": "5"
                                }
                            ]
                        }
                    },
                    "response": []
                }
            ]
        }
    ],
    "variable": [
        {
            "key": "baseUrl",
            "value": "http://localhost:3002",
            "type": "string"
        },
        {
            "key": "userId",
            "value": "",
            "type": "string"
        },
        {
            "key": "authToken",
            "value": "",
            "type": "string"
        }
    ]
}